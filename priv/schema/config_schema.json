{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Sysconfd Configuration",
    "type": "object",
    "required": [
        "templates"
    ],
    "properties": {
        "data_sources": {
            "type": "array",
            "items": {
                "type": "object",
                "required": [
                    "key",
                    "path",
                    "type"
                ],
                "properties": {
                    "key": {
                        "type": "string",
                        "description": "Key to access this data source in templates via @data.key. Note: If you use 'sys', 'env', or 'net' as a key, the system values will still be available via @sys, @env, and @net respectively, while your data source will be accessible via @data.sys, @data.env, or @data.net"
                    },
                    "path": {
                        "type": "string",
                        "description": "Path to the data source file, relative to the config directory"
                    },
                    "type": {
                        "type": "string",
                        "enum": ["json", "env", "text"],
                        "description": "Type of the data source"
                    }
                },
                "additionalProperties": false
            }
        },
        "templates": {
            "type": "array",
            "items": {
                "type": "object",
                "required": [
                    "template",
                    "target"
                ],
                "properties": {
                    "template": {
                        "type": "string",
                        "description": "Path to the template file, relative to the config directory"
                    },
                    "target": {
                        "type": "string",
                        "description": "Target path where the rendered template will be written"
                    },
                    "condition": {
                        "type": "string",
                        "description": "Condition to evaluate. Can use @data for data sources (e.g., @data.network, @data.environment), @sys for system values, @env for environment variables, and @net for network information. Example: '@sys.model == \"MyDevice\" and @data.network.enabled == true'"
                    },
                    "delete_missing": {
                        "type": "boolean",
                        "default": true,
                        "description": "Whether to delete the target file if the condition is not met"
                    }
                },
                "additionalProperties": false
            }
        }
    },
    "additionalProperties": false
} 